#include <stdio.h>
#include <stdlib.h>

#include <sys/types.h>
#include <sys/socket.h>
#include <netdb.h>

#include <string.h>

int main(int argc, char * argv[]) {
	// We need at least 4 args
	if (argc < 4) {
		// There are less than 4 arguments
		printf("Error: not enough args\n");
		exit(EXIT_FAILURE);
	}
	//printf("%s %s\n", argv[1], argv[2]);
	
	struct addrinfo *res;
	struct addrinfo hints;
	memset(&hints, 0, sizeof(struct addrinfo));
	
	// Configure the servers
	hints.ai_family = AF_INET; // AF_INET = famille IPv4
	hints.ai_protocol = IPPROTO_UDP; // Protocol UDP
	
	int e = getaddrinfo(argv[1], argv[3], &hints, &res);
	if (e != 0) { // If getaddrinfo send an error
		fprintf(stderr, "getaddrinfo error %s\n", gai_strerror(e));
		exit(EXIT_FAILURE);
	}
	
	// Reserving a connection socket to the server
	int sock;
	if ((sock = socket(PF_LOCAL, SOCK_DGRAM, 0)) < 0) {
		printf("stocket error\n");
		exit(EXIT_FAILURE);
	}
	
	printf("success Q3\n");
	exit(EXIT_SUCCESS);
}



